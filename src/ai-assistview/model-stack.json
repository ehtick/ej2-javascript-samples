{"data-source.js":"window.defaultPromptResponseData = [\n    {\n        prompt: \"How do I set daily goals in my work day?\",\n        response: \"<p>To stay focused and productive, try these steps for setting daily goals:</p> <ol><li><strong>Identify Priorities:</strong> List the most important tasks based on deadlines or significance.</li> <li><strong>Break Down Tasks:</strong> Split larger tasks into smaller, manageable steps.</li> <li><strong>Set SMART Goals:</strong> Make sure goals are Specific, Measurable, Achievable, Relevant, and Time-bound.</li> <li><strong>Time Blocking:</strong> Allocate specific times for each task to stay organized and on track.</li></ol> <p>Would you like more tips on any of these steps?</p>\",\n        suggestions: [\"How do I prioritize tasks effectively?\", \"What tools or apps can help me prioritize tasks?\"]\n    },\n    {\n        prompt: \"Steps to publish a e-book with marketing strategy\",\n        response: \"<p>To publish an e-book, follow the steps below:</p> <ol><li><strong>Write and format your e-book:</strong> Ensure your content is well-organized, edited, and formatted for digital reading.</li> <li><strong>Choose a publishing platform:</strong> Platforms like Amazon Kindle Direct Publishing (KDP) or Smashwords can help you publish and distribute your e-book.</li> <li><strong>Develop a marketing strategy:</strong> Utilize social media, email newsletters, and book promotion sites to create buzz and reach your target audience.</li> <li><strong>Launch and promote:</strong> Schedule a launch date, gather reviews, and continue promoting through various channels to maintain momentum and drive sales.</li></ol> <p>Do you have a specific topic in mind for your e-book?</p>\",\n        suggestions: [\"How do I create an eye-catching e-book cover?\", \"What are common mistakes to avoid in e-book covers?\"]\n    },\n    {\n        prompt: \"How do I prioritize tasks effectively?\",\n        response: \"<p>To stay focused and productive, set daily goals by:</p> <ol><li><strong>Identifying Priorities:</strong> List important tasks based on deadlines or significance.</li> <li><strong>Breaking Down Tasks:</strong> Divide larger tasks into smaller, manageable steps.</li> <li><strong>Setting SMART Goals:</strong> Ensure goals are Specific, Measurable, Achievable, Relevant, and Time-bound. </li> <li><strong>Time Blocking:</strong>Schedule specific times for each task to stay organized.</li></ol> <p> Need more tips on any of these steps? </p>\"\n    },\n    {\n        prompt: \"What tools or apps can help me prioritize tasks?\",\n        response: \"<p>Here are some tools to help you prioritize tasks effectively:</p> <ol><li><strong>Google Keep:</strong> For simple note-taking and task organization with labels and reminders.</li> <li><strong>Scoro:</strong> A project management tool for streamlining activities and team collaboration.</li> <li><strong>Evernote:</strong> Great for note-taking, to-do lists, and reminders.</li> <li><strong>Todoist:</strong> A powerful task manager for setting priorities and tracking progress.</li></ol> <p>Are you looking for tools to manage a specific type of task or project?</p>\"\n    },\n    {\n        prompt: \"How do I create an eye-catching e-book cover?\",\n        response: \"<p>Creating an eye-catching e-book cover involves a few key steps:</p> <ol><li><strong>Understand your genre and audience:</strong> Research covers of popular books in your genre to see what appeals to your target readers.</li> <li><strong>Choose the right imagery and colors:</strong> Use high-quality images and a color scheme that reflects the tone and theme of your book.</li> <li><strong>Focus on typography:</strong> Select fonts that are readable and complement the overall design. The title should be prominent and easy to read even in thumbnail size.</li> <li><strong>Use design tools or hire a professional:</strong> Tools like Canva or Adobe Spark can help you create a professional-looking cover. Alternatively, consider hiring a graphic designer for a more polished result.</li></ol> <p>Would you like some tips on where to find good images or fonts for your cover?</p>\"\n    },\n    {\n        prompt: \"What are common mistakes to avoid in e-book covers?\",\n        response: \"<p>Here are some common mistakes to avoid when designing an e-book cover:</p> <ol><li><strong>Cluttered design:</strong> Overloading the cover with too many elements can make it look messy and unprofessional. Keep it simple and focused.</li> <li><strong>Poor quality images:</strong> Using low-resolution or generic stock images can detract from the overall appeal. Always opt for high-quality, relevant visuals.</li> <li><strong>Unreadable fonts:</strong> Fancy or overly intricate fonts can be hard to read, especially in thumbnail size. Choose clear, legible fonts for the title and author name.</li> <li><strong>Ignoring genre conventions:</strong> Each genre has its own visual cues. Not adhering to these can confuse potential readers about the book’s content.</li> <li><strong>Inconsistent branding:</strong> If you have a series or multiple books, ensure a consistent style across all covers to build a recognizable brand.</li></ol> <p>Would you like any specific advice on designing your cover?</p>\"\n    }\n];\n\nwindow.defaultSuggestions = [\n    \"How do I set daily goals in my work day?\", \n    \"Steps to publish a e-book with marketing strategy\"\n];\n\nwindow.streamingData = [\n    {\n        prompt: \"What are the main features of the AI AssistView component?\",\n        response: \"The AI AssistView component offers several powerful features that enhance user interaction:\\n\\n- **Customizable Views:** Allows for custom templates to be used for banners, prompts, responses, and suggestions.\\n- **Streaming Responses:** Provides real-time feedback as data is processed, enhancing immediacy and user engagement.\\n- **Interactive Toolbar:** Easily integrates custom toolbar items, such as buttons and inputs, enhancing functionality.\\n- **Seamless Integration:** Connects with AI services to provide advanced processing and intelligent responses.\",\n        suggestions: [ \"How can I customize the appearance of AI AssistView?\", \"What are the benefits of using Markdown?\" ]\n    },\n    {\n        prompt: \"How can I customize the appearance of AI AssistView?\",\n        response: \"Customizing AI AssistView enables you to tailor the look and functionality to suit specific needs:\\n\\n- **Template Customization:** Modify templates for prompts, responses, and more.\\n- **CSS Styling:** Apply custom styles to align with your application’s visual theme.\\n- **Theme Support:** Utilize built-in themes or create your own for consistent styling.\\n- **Banner and Toolbar Configurations:** Adjust content and tools for personalized UI experiences.\",\n        suggestions: [ \"What customization options are available in AI AssistView?\", \"Prime number checking C# example?\" ]\n    },\n    {\n        prompt: \"What is Markdown and how is it used?\",\n        response: \"Markdown is a straightforward syntax used primarily for formatting text documents:\\n\\n- **Headers:** Create headings with `#`, `##`, `###` for different levels.\\n- **Emphasis:** Use `*text*` for italic and `**text**` for bold.\\n- **Links and Images:** `[Link](URL)`, `![Alt Text](ImageURL)` to include links and images.\\n- **Lists and Code Blocks:** Use `-` for lists and triple backticks ``` for code blocks.\\n\\nMarkdown’s simplicity and readability make it ideal for writing documentation.\",\n        suggestions: [ \"What are the benefits of using Markdown?\", \"What customization options are available in AI AssistView?\" ]\n    },\n    {\n        prompt: \"What customization options are available in AI AssistView?\",\n        response: \"AI AssistView provides extensive customization options for tailored user interactions:\\n\\n- **Templates:** Use `<PromptItemTemplate>`, `<ResponseItemTemplate>`, etc., for customized display.\\n- **Custom Toolbar Items:** Add buttons and other controls via `AssistViewToolbar`.\\n- **Dynamic Content:** Update content based on user actions or external events.\\n- **Styling:** Full CSS support for styling individual components and layouts.\",\n        suggestions: [\"What are the main features of the AI AssistView component?\", \"Generate Fibonacci sequence C# example?\"]\n    },\n    {\n        prompt: \"What are the benefits of using Markdown?\",\n        response: \"Markdown provides several benefits, especially in documentation and writing:\\n\\n- **Ease of Use:** Its syntax is simple and quick to learn, increasing productivity.\\n- **Readability:** Plain text format ensures content is easy to read and edit.\\n- **Flexibility:** Can be converted to HTML, PDF, and other formats easily.\\n- **Collaboration:** Widely supported in various tools for collaborative writing and documentation.\",\n        suggestions: [\"Prime number checking C# example?\", \"Generate Fibonacci sequence C# example?\"]\n    },\n    {\n        prompt: \"Prime number checking C# example?\",\nresponse: `<pre><code class=\\\"csharp language-csharp\\\">using System;\n\nclass Program\n{\n    static bool IsPrime(int n)\n    {\n        if (n <= 1) return false;\n        for (int i = 2; i <= Math.Sqrt(n); i++)\n            if (n % i == 0) return false;\n        return true;\n    }\n\n    static void Main()\n    {\n        Console.WriteLine(IsPrime(11)); // True\n    }\n}\n</code></pre>`\n    },\n    {\n        prompt: \"Generate Fibonacci sequence C# example?\",\n        response: `<pre><code class=\\\"csharp language-csharp\\\">using System;\n\nclass Program\n{\n    static void Fibonacci(int n)\n    {\n        int a = 0, b = 1, c;\n        for (int i = 0; i < n; i++)\n        {\n            Console.Write(a + \\\" \\\");\n            c = a + b;\n            a = b;\n            b = c;\n        }\n    }\n\n    static void Main()\n    {\n        Fibonacci(10); // 0 1 1 2 3 5 8 13 21 34\n    }\n}\n</code></pre>`\n    }\n];\n\nwindow.streamingSuggestions = [\n    \"What are the main features of the AI AssistView component?\",\n    \"What is Markdown and how is it used?\"\n];\n\nwindow.assistantSuggestions = [\n    \"How is AI used in everyday life?\",\n    \"C# console app to manage library books\"\n];\n    \nwindow.assistantResponses = [\n    {\n    prompt: \"How is AI used in everyday life?\",\n    response: \"<p>AI is integrated into many aspects of daily life. Common examples include:</p> <ol><li>Voice assistants like Siri and Alexa.</li><li>Recommendation systems on Netflix and YouTube.</li><li>Spam filters in email.</li><li>Navigation apps like Google MapsSmart home devices and appliances.</li><ol>\",\n    suggestions: [\"C# console app to manage library books\", \"What are the benefits of using AI?\"]\n    },\n    {\n    prompt: \"What are the benefits of using AI?\",\n    response: \"<p>Artificial Intelligence (AI) is revolutionizing the way we live, work, and interact with the world. Here are the key benefits of using AI:<br></p><ol><li><strong>Automation of Repetitive Tasks:</strong> AI automates routine tasks, increasing efficiency and allowing humans to focus on creative and strategic work.</li><br><li><strong>Enhanced Decision-Making:</strong> AI analyzes large datasets to uncover patterns and insights, supporting better decisions in fields like finance, healthcare, and logistics.</li><br><li><strong>Personalization and Customer Experience:</strong> AI tailors experiences to individual users, improving satisfaction through personalized recommendations and services.</li><br><li><strong>Healthcare Advancements:</strong> AI improves diagnostics, treatment planning, and patient monitoring, enabling early disease detection and personalized medicine.</li><br><li><strong>Increased Productivity and Cost Savings:</strong> By optimizing processes and reducing errors, AI boosts productivity and lowers operational costs.</li><br><li><strong>Real-Time Data Processing:</strong> AI processes data in real time, enabling instant responses in areas like fraud detection, autonomous vehicles, and emergency services.</li><br><li><strong>Accessibility and Inclusion:</strong> AI-powered tools support people with disabilities through speech-to-text, real-time translation, and assistive technologies.</li><br><li><strong>Innovation and Scientific Discovery:</strong> AI accelerates research in fields like climate science, genomics, and space exploration by handling complex computations.</li><br><li><strong>Improved Safety and Security:</strong> AI enhances security through surveillance, threat detection, and predictive maintenance in industrial environments.</li><br><li><strong>Economic Growth and Job Creation:</strong> AI creates new roles in development, data science, and ethics, while fostering innovation and entrepreneurship.</li><br><li><strong>Environmental Sustainability:</strong> AI supports sustainability by optimizing energy use, improving agriculture, and guiding conservation efforts.</li><br><li><strong>Creative and Artistic Expression:</strong> AI contributes to the arts by generating music, visual art, and literature, opening new creative possibilities.</li></ol><br><p>In conclusion, AI offers transformative benefits across industries and society. When used responsibly, it can enhance human capabilities, solve complex problems, and drive progress in countless areas.</p>\",\n    suggestions: [\"What are the risks or challenges of AI?\", \"C# console app to manage library books\"]\n    },\n    {\n    prompt: \"What are the risks or challenges of AI?\",\n    response: \"<p>While AI has many benefits, it also presents challenges such as:</p><ol><li><strong>Bias:</strong> AI can reflect and amplify biases in training data.</li><li><strong>Privacy:</strong> AI systems often rely on large amounts of personal data.</li> <li><strong>Job Displacement:</strong> Automation may replace certain human jobs.</li></ol>\",\n    suggestions: [\"How is AI used in everyday life?\", \"C# console app to manage library books\"]\n    },       \n    {\n        prompt: \"C# console app to manage library books\",\n        response: `<p>Creating a C# console application for Library Management involves building a simple system to manage books, members, and transactions like borrowing and returning books. Here's a basic structure to get you started:</p><strong>Features to Include</strong><ol><li>Add/Remove Books</li><li>Register Members</li><li>Borrow/Return Books</li><li>View Book List</li><li>View Member List</li></ol><strong>Project Structure</strong><br><p>You can organize your code using classes like:</p><ol><li>Book</li><li>Member</li><li>Library</li><li>Program</li></ol>\n        <pre><code class=\\\"csharp language-csharp\\\">using System;\nusing System.Collections.Generic;\n\nclass Book {\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public bool IsBorrowed { get; set; } = false;\n}\n\nclass Member {\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n\nclass Library {\n    private List<Book> books = new List<Book>();\n    private List<Member> members = new List<Member>();\n\n    public void AddBook(string title) {\n        int id = books.Count + 1;\n        books.Add(new Book { Id = id, Title = title });\n        Console.WriteLine($\"Book '{title}' added with ID {id}.\");\n    }\n\n    public void RegisterMember(string name) {\n        int id = members.Count + 1;\n        members.Add(new Member { Id = id, Name = name });\n        Console.WriteLine($\"Member '{name}' registered with ID {id}.\");\n    }\n\n    public void BorrowBook(int bookId) {\n        var book = books.Find(b => b.Id == bookId);\n        if (book != null && !book.IsBorrowed) {\n            book.IsBorrowed = true;\n            Console.WriteLine($\"Book '{book.Title}' borrowed.\");\n        } else {\n            Console.WriteLine(\"Book not available.\");\n        }\n    }\n\n    public void ReturnBook(int bookId) {\n        var book = books.Find(b => b.Id == bookId);\n        if (book != null && book.IsBorrowed) {\n            book.IsBorrowed = false;\n            Console.WriteLine($\"Book '{book.Title}' returned.\");\n        } else {\n            Console.WriteLine(\"Invalid return.\");\n        }\n    }\n\n    public void ListBooks() {\n        foreach (var book in books) {\n            Console.WriteLine($\"ID: {book.Id}, Title: {book.Title}, Borrowed: {book.IsBorrowed}\");\n        }\n    }\n\n    public void ListMembers() {\n        foreach (var member in members) {\n            Console.WriteLine($\"ID: {member.Id}, Name: {member.Name}\");\n        }\n    }\n}\n\nclass Program {\n    static void Main() {\n        Library library = new Library();\n        while (true) {\n            Console.WriteLine(\"\\nLibrary Menu:\\n1. Add Book\\n2. Register Member\\n3. Borrow Book\\n4. Return Book\\n5. List Books\\n6. List Members\\n7. Exit\");\n            Console.Write(\"Choose an option: \");\n            int choice = int.Parse(Console.ReadLine());\n\n            switch (choice) {\n                case 1:\n                    Console.Write(\"Enter book title: \");\n                    library.AddBook(Console.ReadLine());\n                    break;\n                case 2:\n                    Console.Write(\"Enter member name: \");\n                    library.RegisterMember(Console.ReadLine());\n                    break;\n                case 3:\n                    Console.Write(\"Enter book ID to borrow: \");\n                    library.BorrowBook(int.Parse(Console.ReadLine()));\n                    break;\n                case 4:\n                    Console.Write(\"Enter book ID to return: \");\n                    library.ReturnBook(int.Parse(Console.ReadLine()));\n                    break;\n                case 5:\n                    library.ListBooks();\n                    break;\n                case 6:\n                    library.ListMembers();\n                    break;\n                case 7:\n                    return;\n                default:\n                    Console.WriteLine(\"Invalid option.\");\n                    break;\n            }\n        }\n    }\n}\n</code></pre>`\n    },\n    {\n        prompt: \"Prime number checking C# example?\",\nresponse: `<pre><code class=\\\"csharp language-csharp\\\">using System;\n\nclass Program\n{\n    static bool IsPrime(int n)\n    {\n        if (n <= 1) return false;\n        for (int i = 2; i <= Math.Sqrt(n); i++)\n            if (n % i == 0) return false;\n        return true;\n    }\n\n    static void Main()\n    {\n        Console.WriteLine(IsPrime(11)); // True\n    }\n}\n</code></pre>`\n    }\n];","index.html":"<html><head><script src=\"//npmci.syncfusion.com/development/demos/ai-assistview/model/datasource.js\" type=\"text/javascript\"></script>\n<script src=\"https://cdn.syncfusion.com/ej2/31.1.17/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/31.1.17/{{theme}}.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n            .control-section{\n                margin-top:100px;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"control-section\">\n<div class=\"ai-model\">\n  <div id=\"aiAssistView\">\n    <div class=\"ai-assist-header\">\n      <button id=\"togglebtn\"></button>\n      <div id=\"ai-model-dropdown\"></div>\n    </div>\n  </div>\n</div>\n<div id=\"assistantSidebar\">\n  <div class=\"assistant-sidebar-header\">\n    <div class=\"header-left\">\n      <span id=\"icon-assist\" class=\"header-icon e-icons e-assistview-icon\"></span>\n      <span class=\"header-title\">AI Assist</span>\n    </div>\n    <button id=\"closebtn\"></button>\n  </div>\n  <div class=\"assistant-sidebar-content\">\n    <button id=\"newthreadbtn\"></button>\n    <div id=\"conversation-list\"></div>\n  </div>\n</div>\n<script id=\"bannerTemplate\" type=\"text/x-jsrender\">\n  <div class=\"banner-content e-no-content\">\n    <div class=\"e-icons e-assistview-icon\"></div>\n    <h3 class=\"ai-assist-banner-subtitle\">Chat with AI Model</h3>\n  </div>\n</script>\n<div id=\"toast\"></div>\n</div>\n<style>\n.ai-model {\n  height: 500px;\n  width: 96%;\n  margin: 12px auto;\n  overflow: hidden;\n}\n.ai-model #aiAssistView {\n  border: 1px solid #dee2e6;\n}\n.ai-model .banner-content {\n  text-align: center;\n}\n.ai-model .banner-content.e-no-content {\n  height: 25vh;\n}\n.ai-model .banner-content .e-assistview-icon:before {\n  font-size: 40px;\n}\n#ai-model-dropdown{\n  width:200px;\n}\n#assistantSidebar {\n  border: 1px solid #dee2e6;\n  border-right: none;\n}\n.assistant-sidebar-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-left: 17px;\n  height: 50px;\n  border-bottom: 1px solid #dee2e6;\n}\n.header-icon {\n  font-size: 20px;\n  margin-right: 10px;\n}\n.header-title {\n  font-size: 16px;\n  font-weight: 500;\n}\n.new-thread-btn {\n  border: none;\n  text-align: start;\n  margin-top: 2px;\n  width: 100%;\n}\n.new-thread-btn .e-icons {\n  padding-left: 8px;\n  padding-bottom: 3px;\n  margin-right: 8px;\n  font-weight: bold;\n}\n#conversation-list {\n  border: none;\n  padding-top: 5px;\n}\n.e-view-content {\n  height: 90% !important;\n}\n#assistantSidebar .e-toolbar .e-toolbar-item:not(.e-separator):not(.e-spacer) {\n  padding: 8px 0;\n  margin: 0;\n}\n#assistantSidebar.e-close .assistant-sidebar-content .new-thread-btn,\n#assistantSidebar.e-close .e-toolbar-left .e-toolbar-item {\n  display: none;\n}\n#assistantSidebar.e-close .e-toolbar-items .e-toolbar-right {\n  left: 16px;\n}\n.e-listview .e-list-item {\n  border: none;\n}\n\n#assistantSidebar .e-toolbar-item .e-tbar-btn:hover .e-icons {\n  color: #6c757d;\n}\n.banner-content .e-assistview-icon:before {\n  font-size: 25px;\n}\n.header-left {\n  display: flex;\n  cursor: default;\n}\n.toast-content {\n  display: flex;\n  align-items: baseline;\n  gap: 6px;\n}\n.ai-assist-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 9px;\n  gap:50px;\n  height:50px;\n  border-bottom: 1px solid #dee2e6;\n}\n.assistant-sidebar-content {\n  padding: 5px;\n}\n#assistantSidebar .assistant-sidebar-content .e-text-content {\n  display: flex;\n  align-items: center;\n}\n#assistantSidebar .assistant-sidebar-content .e-text-content .delete-icon {\n  padding: 3px 5px 0 5px;\n}\n.e-dark-mode .ai-model #aiAssistView,\n.e-dark-mode #assistantSidebar{\n  border: 1px solid #666;\n}\n.e-dark-mode #assistantSidebar .assistant-sidebar-header ,\n.e-dark-mode .ai-model .ai-assist-header {\n  border-bottom: 1px solid #666;\n}\n@media screen and (max-width: 680px) {\n  .ai-model {\n    width: 100%;\n    margin: 0;\n  }\n  #ai-model-dropdown {\n    margin-left: 50px;\n  }\n  .e-sidebar-container .e-main-content.e-content-animation {\n    margin-left: 0 !important;\n  }\n  #close {\n    display: block;\n  }\n}\n@media screen and (min-width: 681px) { \n  #close {\n    display: none; \n  }\n}\n</style>\n\n\n\n</div></body></html>","index.js":"{{ripple}}import './data-source';\n\n    function getAzureOpenAIAssist(req) {\n        var apiKey = req.apiKey;\n        var endpoint = req.endpoint;\n        var deployment = req.deployment;\n        var prompt = req.prompt;\n        var apiVersion = req.apiVersion || '2024-07-01-preview';\n        \n        if (apiKey === \"\") {\n            return Promise.reject(new Error('Missing Azure OpenAI configuration: ' ));\n        }\n\n        var url = endpoint.replace(/\\/$/, '') +\n            '/openai/deployments/' + encodeURIComponent(deployment) + '/chat/completions' +\n            '?api-version=' + encodeURIComponent(apiVersion);\n        return fetch(url, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json', 'api-key': apiKey },\n            body: JSON.stringify({\n                messages: [{ role: 'user', content: prompt }],\n                temperature: 0.7,\n                max_tokens: 200\n            })\n        })\n        .then(function(res) {\n            return res.json().then(function(data) {\n                if (!res.ok) {\n                    var apiMsg = data && data.error && data.error.message || 'HTTP ' + res.status + ' ' + res.statusText;\n                    throw new Error(apiMsg);\n                }\n                return data && data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content.trim() || 'No response received.';\n            }, function() {\n                return {};\n            });\n        });\n    }\n    // Calls DeepSeek Chat Completions API and returns the message content string.\n    function getDeepSeekAIAssist(apiKey, prompt) {\n        var url = 'https://api.deepseek.com/chat/completions';\n        return fetch(url, {\n            method: 'POST',\n            headers: {\n                'Authorization': 'Bearer ' + apiKey,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                model: 'deepseek-reasoner',\n                messages: [{ role: 'user', content: prompt }]\n            })\n        })\n        .then(function(response) {\n            if (!response.ok) throw new Error('API request failed');\n            return response.json();\n        })\n        .then(function(data) {\n            return data.choices[0].message.content;\n        });\n    }\n\n    // Calls Google Gemini (Generative Language) API and returns the response text.\n    function getGeminiAIAssist(apiKey, model, prompt) {\n        var url = 'https://generativelanguage.googleapis.com/v1beta/models/' + encodeURIComponent(model) +\n            ':generateContent?key=' + encodeURIComponent(apiKey);\n        return fetch(url, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                contents: [{ parts: [{ text: prompt }] }]\n            })\n        })\n        .then(function(response) {\n            if (!response.ok) throw new Error('API request failed');\n            return response.json();\n        })\n        .then(function(data) {\n            return data.candidates[0].content.parts[0].text;\n        });\n    }\n\n    var AIAssistView = ej.interactivechat.AIAssistView;\n    var Sidebar = ej.navigations.Sidebar;\n    var DropDownList = ej.dropdowns.DropDownList;\n    var Button = ej.buttons.Button;\n    var ListView = ej.lists.ListView;\n    var Toast = ej.notifications.Toast;\n\n    // API Keys and Configuration\n    var geminiApiKey = '';\n    var geminiModel = '';\n    var deepseekApiKey = '';\n    var azureApiKey = '';\n    var azureEndpoint = '';\n    var azureDeployment = '';\n    var azureApiVersion = '';\n\n    var suggestions = [\n        'What are the best tools for organizing tasks?',\n        'How can I maintain work-life balance?',\n    ];\n\n    var selectedConvId = '';\n    var listData = [];\n    var stopStreaming = false;\n    var isMobile = false;\n    var aiAssistViewInst;\n    var sideObj;\n    var toastObj;\n    var models = [\n        { id: 'openai', name: 'GPT-4o-mini(Azure)' },\n        { id: 'gemini', name: 'Gemini 2.5 Flash' },\n        { id: 'deepseek', name: 'DeepSeek-R1' }\n\n    ];\n    var selectedModel = 'openai';\n\n    // Initializes the app state, loads conversations, sets up layout, and shows initial toast\n    function InitializingApp() {\n        checkInitialLocalStorage();\n        listData = getLeftPaneData();\n        conversationList.dataSource = listData;\n        conversationList.refresh();\n        setSidebarConfig();\n        if (listData.length === 0) {\n            loadNewAIAssist();\n        } else {\n            onItemSelect(listData[0]);\n        }\n    }\n\n    // Make sure localStorage root object exists (optionally clear)\n    function checkInitialLocalStorage(isClear) {\n        if (isClear === undefined) { isClear = false; }\n        if (!localStorage.getItem('aiassist-model') || isClear) {\n            localStorage.setItem('aiassist-model', JSON.stringify({}));\n        }\n    }\n\n    function promptRequest(args) {\n        if (!args.prompt || !args.prompt.trim()) {\n            return;\n        }\n        if (!selectedConvId) {\n            selectedConvId = createNewConversation();\n        }\n        updateBannerStyle();\n        updateConversationName(args.prompt);\n        if (selectedModel === 'gemini') {\n            handleGeminiRequest(args);\n        } \n        else if(selectedModel === 'deepseek') {\n            handleDeepSeekRequest(args);\n        }\n        else {\n            handleOpenAIRequest(args);\n        }\n    }\n\n    // Toggles the sidebar on mobile when the close button is pressed\n    function btnClick() {\n        if (isMobile) {\n            sideObj.toggle();\n        }\n    }\n\n    // Toggles the sidebar from the button\n    function toggleSidebar() {\n        sideObj.toggle();\n    }\n\n    // Applies responsive configuration to the sidebar depending on viewport width\n    function setSidebarConfig() {\n        isMobile = window.innerWidth <= 680;\n        var ele = document.querySelector('.e-sidebar-overlay');\n        var toggleButtonElement = document.getElementById('togglebtn');\n        var closeButtonElement = document.getElementById('closebtn');\n\n        if (isMobile) {\n            sideObj.enableDock = false;\n            sideObj.type = 'Over';\n            sideObj.showBackdrop = true;\n            sideObj.hide();\n            if (toggleButtonElement) toggleButtonElement.style.display = 'block';\n            if (closeButtonElement) closeButtonElement.style.display = 'block';\n        } else {\n            sideObj.enableDock = false;\n            sideObj.type = 'Auto';\n            sideObj.showBackdrop = false;\n            sideObj.closeOnDocumentClick = false;\n            sideObj.show();\n            if (toggleButtonElement) toggleButtonElement.style.display = 'none';\n            if (closeButtonElement) closeButtonElement.style.display = 'none';\n        }\n        sideObj.dataBind();\n    }\n\n    // Re-compute layout only when the mobile breakpoint boundary is crossed\n    function onResize() {\n        var newIsMobile = window.innerWidth <= 680;\n        if (newIsMobile !== isMobile) {\n            setSidebarConfig();\n        }\n    }\n\n    // Loads a conversation by id into the AIAssistView and adjusts the layout\n    function onItemSelect(item) {\n        selectedConvId = item.id;\n        updateAIAssistViewData(item.id);\n        updateBannerStyle();\n        if (isMobile && sideObj.isOpen) {\n            sideObj.toggle();\n        }\n    }\n\n    // Removes a conversation from localStorage and updates the UI\n    function deleteConversation(convId) {\n        var appData = JSON.parse(localStorage.getItem('aiassist-model') || '{}');\n        delete appData[convId];\n        localStorage.setItem('aiassist-model', JSON.stringify(appData));\n        refreshConversationList();\n        if (selectedConvId === convId) {\n            if (listData.length > 0) {\n                onItemSelect(listData[0]);\n            } else {\n                loadNewAIAssist();\n            }\n        }\n    }\n\n    // Determines the next conversation id by incrementing the max numeric id\n    function getNextConvId() {\n        var appData = JSON.parse(localStorage.getItem('aiassist-model') || '{}');\n        var ids = Object.keys(appData).map(function(k) { return parseInt(k); }).filter(function(id) { return !isNaN(id); });\n        var maxId = ids.length > 0 ? Math.max.apply(null, ids) : 0;\n        return (maxId + 1).toString();\n    }\n    \n    // Persists the current conversation prompts from the AIAssistView back to localStorage\n    function checkAndUpdateLocalStorage() {\n        var appData = JSON.parse(localStorage.getItem('aiassist-model') || '{}');\n        if (selectedConvId && appData[selectedConvId]) {\n            appData[selectedConvId].prompts = aiAssistViewInst.prompts.map(function(p) {\n                return {\n                    prompt: p.prompt || '',\n                    response: p.response || '',\n                };\n            });\n            localStorage.setItem('aiassist-model', JSON.stringify(appData));\n        }\n    }\n\n    // Builds the left pane list from localStorage, sorted by id descending\n    function getLeftPaneData() {\n        var appData = JSON.parse(localStorage.getItem('aiassist-model') || '{}');\n        return Object.keys(appData)\n            .map(function(k) { return { id: k, num: parseInt(k) }; })\n            .filter(function(item) { return !isNaN(item.num); })\n            .sort(function(a, b) { return b.num - a.num; })\n            .map(function(item) {\n                var convData = appData[item.id];\n                var name = (convData && convData.name) ? convData.name.split('\\n')[0] : 'Untitled Conversation';\n                return { text: name, id: item.id };\n            });\n    }\n\n    function updateBannerStyle() {\n        var bannerElem = document.querySelector('.banner-content');\n        if (bannerElem) {\n            bannerElem.style.display = (aiAssistViewInst.prompts || []).length > 0 ? 'none' : 'block';\n        }\n    }\n\n    // If the current conversation is \"New Conversation\", set its name from the first prompt\n    function updateConversationName(prompt) {\n        if (selectedConvId) {\n            var appData = JSON.parse(localStorage.getItem('aiassist-model') || '{}');\n            var convData = appData[selectedConvId];\n            if (convData && convData.name === 'New Conversation') {\n                convData.name = prompt.slice(0, 40).trim() || 'Untitled Conversation';\n                localStorage.setItem('aiassist-model', JSON.stringify(appData));\n                refreshConversationList();\n            }\n        }\n    }\n\n    // Refreshes the left pane list and re-binds delete handlers\n    function refreshConversationList() {\n        listData = getLeftPaneData();\n        conversationList.dataSource = listData;\n        conversationList.refresh();\n        refreshDeleteListeners();\n    }\n\n    // Loads prompts and suggestion data for a conversation into AIAssistView\n    function updateAIAssistViewData(id) {\n        if (!aiAssistViewInst) return;\n        aiAssistViewInst.prompts = [];\n        aiAssistViewInst.promptSuggestions = suggestions;\n        if (id) {\n            var appData = JSON.parse(localStorage.getItem('aiassist-model') || '{}');\n            var convData = appData[id.toString()];\n            if (convData) {\n                aiAssistViewInst.prompts = convData.prompts || [];\n                aiAssistViewInst.promptSuggestions = convData.promptSuggestions || suggestions;\n            }\n        }\n    }\n\n    // Clears the current AIAssistView to start a brand-new conversation\n    function loadNewAIAssist() {\n        selectedConvId = '';\n        if (aiAssistViewInst) {\n            aiAssistViewInst.prompts = [];\n            aiAssistViewInst.promptSuggestions = suggestions;\n        }\n        updateBannerStyle();\n        if (isMobile && sideObj.isOpen) {\n            sideObj.toggle();\n        }\n    }\n\n    // Creates a new conversation entry in localStorage and returns its id\n    function createNewConversation() {\n        var newId = getNextConvId();\n        var appData = JSON.parse(localStorage.getItem('aiassist-model') || '{}');\n        appData[newId] = {\n            name: 'New Conversation',\n            prompts: [],\n            promptSuggestions: suggestions.slice(), // Create a copy\n        };\n        localStorage.setItem('aiassist-model', JSON.stringify(appData));\n        refreshConversationList();\n        return newId;\n    }\n\n    function handleStopResponse() {\n        stopStreaming = true;\n    }\n\n    // Simulates token streaming behavior by progressively appending characters\n    function streamAIResponse(fullResponse) {\n        return new Promise(function(resolve) {\n            var streamedResponseText = '';\n            if (!fullResponse) {\n                resolve(streamedResponseText);\n                return;\n            }\n            setTimeout(function() {\n                var i = 0;\n                function streamLoop() {\n                    if (i >= fullResponse.length || stopStreaming) {\n                        resolve(streamedResponseText);\n                        return;\n                    }\n                    streamedResponseText += fullResponse[i];\n                    i++;\n                    aiAssistViewInst.addPromptResponse(streamedResponseText, false);\n                    aiAssistViewInst.scrollToBottom();\n                    setTimeout(streamLoop, 10);\n                }\n                streamLoop();\n            }, 300);\n        });\n    }\n\n    // Sends a prompt to Gemini, streams the response, and finalizes it if not stopped\n    function handleGeminiRequest(args) {\n        stopStreaming = false;\n        if (!aiAssistViewInst) return;\n        getGeminiAIAssist(geminiApiKey, geminiModel, args.prompt)\n            .then(function(fullResponse) {\n                return streamAIResponse(fullResponse);\n            })\n            .then(function(streamedText) {\n                if (!stopStreaming) {\n                    aiAssistViewInst.addPromptResponse(streamedText, true);\n                    checkAndUpdateLocalStorage();\n                }\n            })\n            .catch(function(error) {\n                setTimeout(() => {\n                    var errorMessage = '⚠️ Something went wrong while connecting to the Gemini service. Please check your API key.';\n                    aiAssistViewInst.addPromptResponse(errorMessage, true);\n                    checkAndUpdateLocalStorage();\n                },1000);\n            });\n    }\n\n    // Sends a prompt to DeepSeek, streams the response, and finalizes it if not stopped\n    function handleDeepSeekRequest(args) {\n        stopStreaming = false;\n        if (!aiAssistViewInst) return;\n        getDeepSeekAIAssist(deepseekApiKey, args.prompt)\n            .then(function(fullResponse) {\n                return streamAIResponse(fullResponse);\n            })\n            .then(function(streamedText) {\n                if (!stopStreaming) {\n                    aiAssistViewInst.addPromptResponse(streamedText, true);\n                    checkAndUpdateLocalStorage();\n                }\n            })\n            .catch(function(error) {\n                setTimeout(() => {\n                    var errorMessage = '⚠️ Something went wrong while connecting to the DeepSeek service. Please check your API key.';\n                    aiAssistViewInst.addPromptResponse(errorMessage, true);\n                    checkAndUpdateLocalStorage();\n                },1000);\n            });\n    }\n\n    function handleOpenAIRequest(args) {\n        stopStreaming = false;\n        if (!aiAssistViewInst) return;\n        getAzureOpenAIAssist({\n            apiKey: azureApiKey,\n            endpoint: azureEndpoint,\n            deployment: azureDeployment,\n            apiVersion: azureApiVersion,\n            prompt: args.prompt\n          })\n            .then(function(fullResponse) {\n                return streamAIResponse(fullResponse);\n            })\n            .then(function(streamedText) {\n                if (!stopStreaming) {\n                    aiAssistViewInst.addPromptResponse(streamedText, true);\n                    checkAndUpdateLocalStorage();\n                }\n            })\n            .catch(function(error) \n            {\n                setTimeout(() => {\n                var errorMessage = '⚠️ Something went wrong while connecting to the OpenAI service. Please check your API key.';\n                aiAssistViewInst.addPromptResponse(errorMessage, true);\n                checkAndUpdateLocalStorage();\n                },1000);\n            });\n    }\n\n    // Binds click handlers to per-item delete icons in the conversation list\n    function refreshDeleteListeners() {\n        var deletes = document.querySelectorAll('.delete-icon');\n        deletes.forEach(function(del) {\n            del.onclick = function(e) {\n                e.stopPropagation();\n                e.preventDefault();\n                var convId = del.dataset.id;\n                deleteConversation(convId);\n            };\n        });\n    }\n\n    // Instantiate the AIAssistView component and attach to DOM\n    aiAssistViewInst = new AIAssistView({\n        bannerTemplate: \"#bannerTemplate\",\n        promptSuggestions: suggestions,\n        promptRequest: promptRequest,\n        showHeader: false,\n        stopRespondingClick: handleStopResponse,\n        width: 'auto',\n        enableAttachments: true,\n        attachmentSettings: {\n            saveUrl: 'https://services.syncfusion.com/js/production/api/FileUploader/Save',\n            removeUrl: 'https://services.syncfusion.com/js/production/api/FileUploader/Remove'\n        },\n        footerToolbarSettings: {\n            toolbarPosition: 'Bottom'\n        }\n    });\n    aiAssistViewInst.appendTo('#aiAssistView');\n\n    var toggleButtonElement = document.getElementById('togglebtn');\n    var togglebtn = new Button({ iconCss: \"e-icons e-menu\" });\n    togglebtn.appendTo(toggleButtonElement);\n    toggleButtonElement.addEventListener('click', toggleSidebar);\n\n    // Model selector dropdown: switches which backend is used for prompts\n    var modelDropdown = new DropDownList({\n        dataSource: models,\n        popupHeight: \"200px\",\n        width:\"200px\",\n        fields: { text: 'name', value: 'id' },\n        value: selectedModel,\n        change: function(args) {\n            selectedModel = args.value;\n            var modelName = (models.find(function(m) { return m.id === selectedModel; }) || {}).name || 'the selected model';\n            toastObj.show({\n                content: '<div class=\"toast-content\"><span class=\"e-icons e-magic-wand\"> </span> <span>You are using <b>' + modelName + '</b> with standard access</span></div>'\n            });\n        }\n    });\n    modelDropdown.appendTo('#ai-model-dropdown');\n    \n    // Sidebar component setup\n    sideObj = new Sidebar({\n        width: \"250px\",\n        target: \".ai-model\",\n        position: \"Left\",\n        enableDock: false,\n        dockSize: \"50px\",\n        enableGestures: false,\n        type: 'Auto',\n        closeOnDocumentClick: false,\n        showBackdrop: false\n    });\n    sideObj.appendTo('#assistantSidebar');\n\n    var closeButtonElement = document.getElementById('closebtn');\n    var closebtn = new Button({ iconCss: \"e-icons e-close\", cssClass: \"e-flat\" });\n    closebtn.appendTo(closeButtonElement);\n    closeButtonElement.addEventListener('click', btnClick);\n\n    var newThreadButtonElement = document.getElementById('newthreadbtn');\n    var newthreadbtn = new Button({\n        iconCss: \"e-icons e-plus\",\n        cssClass: \"new-thread-btn\",\n        content: \"New Thread\"\n    });\n    newthreadbtn.appendTo(newThreadButtonElement);\n    newThreadButtonElement.addEventListener('click', loadNewAIAssist);\n\n    // Left pane conversation list: item template includes a delete icon\n    var conversationList = new ListView({\n        dataSource: listData,\n        fields: { text: 'text', id: 'id' },\n        template: '<div class=\"e-text-content\"><span class=\"e-list-text\">${text}</span><span data-id=${id} class=\"e-icons e-trash delete-icon\" title=\"Delete Conversation\"></span></div>',\n        select: function(args) { onItemSelect(args.data); }\n    });\n    conversationList.appendTo('#conversation-list');\n\n    // Delegated delete handler to support both current and future list items\n    var convContainer = document.getElementById('conversation-list');\n    convContainer.addEventListener('click', function(ev) {\n        var target = ev.target;\n        var icon = target.closest('.delete-icon');\n        if (!icon) return;\n\n        ev.preventDefault();\n        ev.stopPropagation();\n\n        var convId = icon.dataset.id;\n        deleteConversation(convId);\n    });\n\n    // General-purpose toast instance\n    toastObj = new Toast({\n        position: { X: 'right', Y: 'Top' },\n        target: \".e-view-content\",\n        timeOut: 1500,\n        showCloseButton: true\n    });\n    toastObj.appendTo('#toast');\n\n    // Initial page setup: load conversations, set layout, and wire up resize handling\n    InitializingApp();\n    listData = getLeftPaneData();\n    if (listData.length === 0) {\n        loadNewAIAssist();\n    } else {\n        onItemSelect(listData[0]);\n    }\n    setSidebarConfig();\n    window.addEventListener('resize', onResize);\n"}